doctype html
html
  head
    meta(charset="utf-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")

    style.
      @font-face {
        font-family: "Raleway";
        src: url("assets/fonts/Raleway-Regular.ttf");
        font-weight: normal;
        font-style: normal;
      }

      @font-face {
        font-family: "Raleway";
        src: url("assets/fonts/Raleway-Light.ttf");
        font-weight: lighter;
        font-style: normal;
      }

    link(href="assets/css/normalize.css", type="text/css", rel="stylesheet")
    //link(href="assets/css/skeleton.css", type="text/css", rel="stylesheet")

    if develop
      link(href="css/app.css", type="text/css", rel="stylesheet")
    else
      link(href="css/app-#{version}.min.css", type="text/css", rel="stylesheet")
  body
    section(data-slide-name="start")
      .v-align
        h1 snabbt.js
        h2
          em The minimalistic animation library


    section.me-slide(data-slide-name="me")
      h2 ME
      .v-align
        img(src="assets/images/netlight-purple.png")

        p.twitter-handle @danielundin
        p github.com/daniel-lundin

    section(data-slide-name="agenda")
      h2 Agenda
      .v-align
        .flex
          .col-50
            h3 Part 1
            ul.centered-text
              li Framerates
              li Browser rendering
              li Layout thrashing

          .col-50
            h3 Part 2
            p snabbt.js

    section(data-slide-name="fps")
      h2 Framerates
      .v-align
        p 60 FPS ~= 16.66667ms / FRAME
        pre.code-box.centered.fragment
          code.language-javascript setInterval(func, 1000/60)
        div.fragment
          p requestAnimationFrame syncs with refresh rate
          pre.code-box.centered
            code.language-javascript requestAnimationFrame(function(time) { /* Do the stuffs */ }); 
    section(data-slide-name="domtopixel")
      h2 DOM to pixel
      .v-align
        pre.fragment.code-box.centered
          code.language-javascript element.style.width = '100px';

        .render-graph
          .box.fragment
            .heading Recalculate style
          .box.fragment
            .heading Layout
          .box.fragment
            .heading Paint
          .box.fragment
            .heading Composite layers

        p.fragment Remember: One frame is 16.6667ms...

    section(data-slide-name="domtopixel-2")
      h2 DOM to pixel
      .v-align
        .render-graph
          .box
            .heading Recalculate style
          .box
            .heading Layout
            ul.render-words
              .word width
              .word height
              .word padding
              .word margin
              .word display
              .word etc
          .box
            .heading Paint
            ul.render-words
              .word color
              .word border
              .word box-shadow
              .word outline
              .word border-radius
              .word etc
          .box
            .heading Composite layers
            ul.render-words
              .word transform
              .word opacity

        p.fragment Better chance to fit in one frame


    section(data-slide-name="layout-thrashing")
      h2 Layout thrashing
      .v-align
        blockquote.centered.fragment
          | ”Layout Thrashing occurs when JavaScript violently writes, then reads, from the DOM, multiple times causing document reflows.”

        ul.bullet-list.centered.fragment
          li DOM-write puts DOM in <em>dirty</em> state
          li DOM-read requires non-<em>dirty</em>

    section(data-slide-name="layout-thrashing-2")
      h2 Layout thrashing
      .v-align
        pre.code-box.centered
          code.language-javascript  // Read
            | var h1Size = element1.clientHeight;
            | // Write (invalidates layout)
            | element1.style.height = (h1Size * 2) + 'px';
            | // Read (triggers layout)
            | var h2Size = element2.clientHeight;
            | // Write (invalidates layout)
            | element2.style.height = (h2Size * 2) + 'px';

    section(data-slide-name="layout-thrashing-2")
      h2 Layout thrashing
      .v-align
        pre.code-box.centered
          code.language-javascript
            | // Organize reads together
            | var h1Size = element1.clientHeight;
            | var h2Size = element2.clientHeight;
            | 
            | // Organize writes together
            | element1.style.height = (h1Size * 2) + 'px';
            | element2.style.height = (h2Size * 2) + 'px';


    section(data-slide-name="part2")
      .v-align
        h1 PART 2
        h2 snabbt.js

    section(data-slide-name="snabbt")
      h3 snabbt.js in one slide
      .v-align
        p Move DOM elements from one state* to another
        p *State:
        ul
          li transform (position, rotation, scale, skew)
          li opacity

    section(data-slide-name="snabbt")
      .v-align
        
        h2 what is snabbt.js?
        p.fragment Matrix multiplication library
        p.fragment Tweener
        p.fragment +Rocketsauce

    section(data-slide-name="chaining")
      h2 Chaining
      .v-align
        .flex
          .col-50
            pre.code-box.small
              code.language-javascript snabbt(element, {
                |   position: [100, 0, 0],
                |   rotation: [0, 0, Math.PI/4]
                | }).snabbt({
                |   position: [100, 100, 0],
                |   rotation: [0, 0, Math.PI/2]
                | }).snabbt({
                |   position: [0, 100, 0],
                |   rotation: [0, 0, 3*Math.PI/4]
                | }).snabbt({
                |   position: [0, 100, 0],
                |   rotation: [0, 0, 0]
                | });

          .col-50
            #chaining Chaining

    section(data-slide-name="multi-element-animations")
      h2 Multi-element animations
      .v-align
        .flex
          .col-50
            pre.code-box.small
              code.language-javascript snabbt(elements, {
                |   position: [200, 0, 0],
                |   rotationPost: function(i, total) {
                |     return [0, 0, i/total * 2 * Math.PI];
                |   }
                | });

          .col-50.relative
            .multi-element
              .ball
              .ball
              .ball
              .ball
              .ball
              .ball
              .ball
              #multi-element-toggle.toggle-ball ★


    section
      h2 Basic API
      .v-align
        pre.code-box.centered.fragment
          code.language-javascript snabbt(element, animationConfiguration)

        pre.code-box.centered.fragment
          code.language-javascript snabbt(element, {
            |  position: [100, 100, 0]
            |})
    if develop
      each jsFile in jsLibFiles
        script(src="js/#{jsFile}")

    each jsFile in jsFiles
      script(src="js/#{jsFile}")

    if develop
      script(src="//localhost:9001/livereload.js")
